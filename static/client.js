!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n){e.exports=function(e,n){return"\n    <li class='grid__photo rel'>\n      <img class='x y' src='".concat(e.images.placeholder,"' />\n    </li>\n  ")}},function(e,n,t){},,,function(e,n,t){"use strict";t.r(n);var r="function"==typeof fetch?fetch.bind():function(e,n){return n=n||{},new Promise(function(t,r){var o=new XMLHttpRequest;for(var u in o.open(n.method||"get",e,!0),n.headers)o.setRequestHeader(u,n.headers[u]);function i(){var e,n=[],t=[],r={};return o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(o,u,i){n.push(u=u.toLowerCase()),t.push([u,i]),e=r[u],r[u]=e?e+","+i:i}),{ok:2==(o.status/100|0),status:o.status,statusText:o.statusText,url:o.responseURL,clone:i,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},headers:{keys:function(){return n},entries:function(){return t},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}o.withCredentials="include"==n.credentials,o.onload=function(){t(i())},o.onerror=r,o.send(n.body)})};const[o,u,i,a]=[0,1,2,3],[c,s,f,l]=[47,58,42,63];new Map;function d(e,n,t){return{node:e,actions:n,hydrate:t.hydrate,get state(){return t.state}}}function h(e){return function(n,t,r){var o=e(d(n,t,r))||{};return o.onStateChange&&r.listen(o.onStateChange),o}}t(1);function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,u=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw u}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=h(function(e){var n=e.node,t=(e.state,e.actions),r=p(n.getElementsByTagName("input"),1)[0],o=n.getElementsByTagName("button")[0];r.addEventListener("keyup",function(e){e.target.value?t.search(e.target.value):t.resetSearch()}),o.addEventListener("click",function(e){r.value="",t.resetSearch()})}),g=t(0),y=t.n(g),m={search:v,grid:h(function(e){var n=e.node;e.state,e.actions;return{onStateChange:function(e){var t=e.photos;n.innerHTML=t.reduce(function(e,n){return e+y()(n)},"")}}})},b=Object.assign({photoCache:window.__hydrate.photos},window.__hydrate);(function(e,n,t){void 0===e&&(e={}),void 0===t&&(t={});var r=[],o=function(e){var n=Object.assign({},e),t=[],r=[];return{get state(){return n},hydrate:function(e){return n=Object.assign({},n,"function"==typeof e?e(n):e),function(e){for(var o=0,u=t;o<u.length;o+=1)(0,u[o])(n);for(;r.length;)r.pop()(n);e&&e()}},listen:function(e){return t.indexOf(e)<0&&t.push(e),function(){return t.splice(t.indexOf(e),1)}},once:function(e){r.indexOf(e)<0&&r.push(e)},reset:function(){n=e},replace:function(e){n=e}}}(n||{}),u=Object.keys(t).reduce(function(e,n){return e[n]=function(e){return Promise.resolve(t[n](e)(o.state)).then(function(e){return o.hydrate(e)()})},e},{});return{actions:u,hydrate:o.hydrate,get state(){return o.state},add:function(n){Object.assign(e,n)},mount:function(n){void 0===n&&(n="data-component"),n=[].concat(n);for(var t=0;t<n.length;t++)for(var i=n[t],a=[].slice.call(document.querySelectorAll("["+i+"]"));a.length;){var c=a.pop(),s=c.getAttribute(i),f=e[s];if(f){c.removeAttribute(i);var l=void 0;try{l=f(c,u,o)}catch(n){console.error("picoapp - "+s+" failed - "+(n.message||n))}l&&r.push(l)}}},unmount:function(){return Promise.all(r.filter(function(e){return e.onUnmount}).map(function(e){var n=e.onUnmount;return Promise.resolve("function"==typeof n?n(d(e.node,u,o)):null)})).then(function(){r=r.filter(function(e){return!e.onUnmount}).filter(function(e){return!document.documentElement.contains(e.node)})})}}})(m,b,{search:function(e){return function(n){return r("".concat(b.api,"/api/v1/search/").concat(e),{mode:"cors"}).then(function(e){return e.json()}).then(function(e){return{photos:e,photoCache:function(e,n){for(var t=[],r=0;r<n.length;r++){var o=n[r][e];t.indexOf(o)<0&&t.push(o)}var u=[];e:for(var i=0;i<t.length;i++)for(var a=0;a<n.length;a++)if(n[a][e]===t[i]){u.push(n[a]);continue e}return u}("id",n.photoCache.concat(e))}})}},resetSearch:function(){return function(e){return{photos:e.photoCache}}}}).mount()}]);
//# sourceMappingURL=client.js.map